(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41defd83"],{"5ca9":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"table"},[o("div",{staticClass:"crumbs"},[o("el-breadcrumb",[o("el-breadcrumb-item",[o("i",{staticClass:"el-icon-tickets"},[t._v("本店医生")])])],1),o("div",{staticClass:"cantainer"},[o("div",{staticClass:"handle-box"},[o("el-input",{staticClass:"search-input",attrs:{placeholder:"筛选关键词",size:"small"},model:{value:t.ListSearch,callback:function(e){t.ListSearch=e},expression:"ListSearch"}}),o("el-button",{staticClass:"handle-del mr10",staticStyle:{"margin-left":"5px",height:"35px","margin-top":"8px"},attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),o("el-button",{staticClass:"handle-del mr10",staticStyle:{"margin-left":"20px",height:"35px","margin-top":"8px"},attrs:{type:"primary"},on:{click:t.addDoctor}},[t._v("添加已注册医生")])],1),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark"}},[o("el-table-column",{attrs:{prop:"doctorName",label:"医生名称",width:"200"}}),o("el-table-column",{attrs:{prop:"doctorAge",label:"医生年龄","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"doctorSex",label:"医生性别","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("getSex")(e.row.doctorSex,e.row.doctorSex))+" ")]}}])}),o("el-table-column",{attrs:{prop:"doctorCreatetime",label:"注册时间",sortable:"",width:"120"}}),o("el-table-column",{attrs:{prop:"doctorPhone",label:"医生电话",sortable:"",width:"120","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"doctorAddress",label:"医生地址",sortable:"","show-overflow-tooltip":"",width:"110"}}),o("el-table-column",{attrs:{prop:"doctorSchool",label:"毕业学校","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"doctorCertificate",label:"医师执照","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-image",{attrs:{src:e.row.doctorCertificate,"preview-src-list":t.doctorCertificates,width:"70",height:"70"},on:{click:function(o){return t.showDetail(e.row.doctorCertificate)}}})]}}])}),o("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){return t.handleEdit(e.$index,e.row)}}},[t._v("免去任职")])]}}])})],1),o("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,20,40],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalNum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),o("el-dialog",{attrs:{title:"添加已注册医师",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{attrs:{model:t.form}},[o("el-form-item",{attrs:{label:"选择医生","label-width":"120px"}},[o("el-select",{attrs:{placeholder:"请选择"},on:{change:t.select},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.doctors,(function(e){return o("el-option",{key:e.value,attrs:{label:e.doctorName,value:e.doctorPhone}},[o("span",{staticStyle:{float:"left"}},[t._v(t._s(e.doctorName))]),o("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.doctorPhone))])])})),1)],1),o("el-form-item",{attrs:{label:"医师电话","label-width":"120px"}},[o("el-input",{model:{value:t.form.doctorPhone,callback:function(e){t.$set(t.form,"doctorPhone",e)},expression:"form.doctorPhone"}})],1),o("el-form-item",{attrs:{label:"验证码","label-width":"120px"}},[o("el-input",{staticStyle:{width:"72%"},attrs:{placeholder:"输入验证码"},model:{value:t.form.verification,callback:function(e){t.$set(t.form,"verification",e)},expression:"form.verification"}}),o("el-button",{staticClass:"but",staticStyle:{"font-weight":"bold"},attrs:{disabled:1!==t.display},on:{click:function(e){return t.getVerification()}}},[t._v(t._s(t.content))])],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.setDoctor}},[t._v("确 定")]),o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")])],1)],1)],1)])},r=[],s=(o("ac1f"),o("00b4"),{mounted:function(){this.getDoctor(2)},data:function(){return{list:[],totalNum:0,doctors:[],content:"获取验证码",value:"",doctorCertificates:[],dialogFormVisible:!1,ListSearch:"",editFormVisible:!1,ruleForm:{},form:{doctorPhone:"",verification:""},editForm:{name:"",date:"",address:""},addLoading:!1,display:1,currentPage:1,pageSize:5,runNum:60}},created:function(){},filters:{getSex:function(t){return"1"==t?"男":"女"},getType:function(t){return 1==t?"非处方药":"处方药"},getStatus:function(t){return 0==t?"上架":"未上架"}},methods:{search:function(){this.getDoctor(2),this.pageNum=1},setDoctor:function(){var t=this;""!=this.form.doctorPhone&&""!=this.form.verification?(this.form.doctorBelong=JSON.parse(localStorage.getItem("pharmacy")).pharmacyId,console.log(this.form),this.$axios.post("/api/message/provide/doctor/setDoctor",this.form).then((function(e){200==e.data.code?(t.$message.success(e.data.message),t.getDoctor(2),t.dialogFormVisible=!1):t.$message.error(e.data.message)}))):this.$message.error("请填写完整数据")},select:function(t,e){console.log(t),console.log(e),this.form.doctorPhone=t;var o=0;for(o=0;o<this.doctors.length;o++)if(t==this.doctors[o].doctorPhone){this.form.doctorId=this.doctors[o].doctorId;break}},setValue:function(t){console.log(11231),console.log(t),this.form.doctorId=t.doctorId,this.form.doctorBelong=JSON.parse(localStorage.getItem("pharmacy")).pharmacyId},addDoctor:function(){this.dialogFormVisible=!0,this.getDoctor(1)},showDetail:function(t){this.doctorCertificates=[],this.doctorCertificates.push(t)},getDoctor:function(t){var e=this,o={content:this.ListSearch,pageNum:this.currentPage,pageSize:this.pageSize,pharmacyId:JSON.parse(localStorage.getItem("pharmacy")).pharmacyId,doctorStatus:t};1==t&&(o={content:this.ListSearch,pageNum:this.currentPage,pageSize:this.pageSize,doctorStatus:t}),console.log(o),this.$axios.post("/api/message/provide/doctor/getAllDoctor",o).then((function(o){1==t?e.doctors=o.data.data.records:(e.list=o.data.data.records,e.currentPage=o.data.data.current,e.totalNum=o.data.data.total,console.log(o.data.data),e.$message.success(o.data.message))}))},handleSizeChange:function(t){this.pageSize=t,this.getDrug()},handleCurrentChange:function(t){this.currentPage=t,this.getDrug()},getVerification:function(){var t=this;if(console.log(this.form.doctorPhone),""!=this.form.doctorPhone)if(this.checkPhone()){this.$axios.get("/api/message/provide/verification/send/"+this.form.doctorPhone).then((function(e){t.$message.success(e.data.message)})),this.display=2;var e=this,o=setInterval((function(){e.runNum--,e.runNum<=0?(e.content="获取验证码",e.display=1,e.runNum=60,clearInterval(o)):e.content=e.runNum+"s后重发"}),1e3);this.content="60s后重发"}else this.$message.error("请输入正确的手机号");else this.$message.error("请填写手机号！！！")},checkPhone:function(){var t=/^[1][3,4,5,7,8][0-9]{9}$/,e=this.form.doctorPhone;return!!t.test(e)},handleEdit:function(t,e){var o=this,a={doctorId:e.doctorId,doctorStatus:1,doctorBelong:0};this.$axios.post("/api/message/provide/doctor//updateDoctor",a).then((function(t){o.$message.success("免除成功"),o.getDoctor(2)}))}}}),i=s,l=(o("8837"),o("2877")),c=Object(l["a"])(i,a,r,!1,null,"740e9906",null);e["default"]=c.exports},8837:function(t,e,o){"use strict";o("cf45")},cf45:function(t,e,o){}}]);
//# sourceMappingURL=chunk-41defd83.c2dee2e3.js.map