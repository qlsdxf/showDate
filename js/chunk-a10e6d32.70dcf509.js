(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a10e6d32"],{"44e1":function(t,a,e){"use strict";e("6d34")},"52f1":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"table"},[e("div",{staticClass:"crumbs"},[e("el-breadcrumb",[e("el-breadcrumb-item",[e("i",{staticClass:"el-icon-tickets"},[t._v("店铺排名情况")])])],1),e("div",{staticClass:"cantainer"},[e("div",{staticClass:"handle-box"},[e("el-button",{staticClass:"handle-del mr10",staticStyle:{"margin-left":"5px",height:"35px","margin-top":"8px"},attrs:{type:"primary"},on:{click:t.seeOwn}},[t._v("查看自己")]),e("el-button",{staticClass:"handle-del mr10",staticStyle:{"margin-left":"5px",height:"35px","margin-top":"8px"},attrs:{type:"primary"},on:{click:t.getPharmacyRank}},[t._v("查看所有")])],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark","row-class-name":t.tableRowClassName}},[e("el-table-column",{staticStyle:{"text-align":"center"},attrs:{prop:"pharmacyName",label:"店铺名称",width:"220"}}),e("el-table-column",{attrs:{prop:"pharmacySort",label:"店铺排名",width:"120px","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"pharmacyBuyRank",label:"是否购买排名",width:"170px","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(t._f("getStatus")(a.row.pharmacyBuyRank,a.row.pharmacyBuyRank))+" ")]}}])}),e("el-table-column",{attrs:{prop:"pharmacyBuyPic",label:"是否购买热门图片",width:"170px","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(t._f("getStatus")(a.row.pharmacyBuyPic,a.row.pharmacyBuyPic))+" ")]}}])}),e("el-table-column",{attrs:{prop:"pharmacyNum",label:"购买排名次数",width:"170px"}}),e("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.pharmacyId==t.pharmacy.pharmacyId?e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.buyPic(a.row)}}},[t._v("购买热门图片")]):t._e(),a.row.pharmacyId==t.pharmacy.pharmacyId?e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.buyRank(a.row)}}},[t._v("购买排名")]):t._e(),a.row.pharmacyId!=t.pharmacy.pharmacyId?e("el-button",{attrs:{size:"mini"}},[t._v("不可操作")]):t._e()]}}])})],1),e("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"total,  prev, pager, next, jumper",total:t.totalNum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])},c=[],r={mounted:function(){this.pharmacy=JSON.parse(localStorage.getItem("pharmacy")),void 0==this.pharmacy&&this.$router.push("/merchantLogin"),this.getPharmacyRank(),this.getRankNum()},data:function(){return{list:[],totalNum:0,pharmacy:{},dialogFormVisible:!1,ListSearch:"",editFormVisible:!1,merchantBusinessLicense:[],merchantIdCardPic:[],merchantDrugLicense:[],merchantBankAccount:[],addLoading:!1,currentPage:1,pageSize:5,content:"",rankNum:4}},created:function(){},filters:{getName:function(t){return"****"},getStatus:function(t){return 0==t?"否":"是"}},methods:{getRankNum:function(){var t=this;this.$axios.post("/api/pay/provide/pay/getNum").then((function(a){200==a.data.code&&(t.rankNum=a.data.data)}))},buyPic:function(t){var a=this;console.log(t);var e={pharmacyId:this.pharmacy.pharmacyId,type:1,name:"购买热门图片"};1==this.pharmacy.pharmacyBuyPic?this.$message({type:"warning",message:"你已经购买了，请不要重复购买"}):this.rankNum>0?this.$confirm("系统现在还有"+this.rankNum+"个热门图片位置是否购买？","购买热门图片",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then((function(){a.$axios.post("/api/pay/provide/pay/buyPic",e).then((function(t){document.write(t.data.data)}))})).catch((function(){a.$message({type:"info",message:"已取消"})})):this.$confirm("系统现在没有热门图片位置，请耐心等待","购买热门图片",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){})).catch((function(){}))},buyRank:function(t){var a=this,e={pharmacyId:t.pharmacyId,type:1,name:"购买热门图片"};console.log(this.pharmacy.pharmacyNum),1==this.pharmacy.pharmacyBuyPic?this.$message({type:"warning",message:"你已经购买了，请不要重复购买"}):2==this.pharmacy.pharmacyNum?this.$confirm("你本周还有二次购买机会，第一次免费，确认购买排名？","购买热门图片",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then((function(){a.$axios.post("/api/pay/provide/pay/buyRank",e).then((function(t){1==t.data.data?a.$message.success("购买成功"):document.write(t.data.data)}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})})):1==this.pharmacy.pharmacyNum?this.$confirm("你本周还有一次购买机会，确认购买排名？","购买热门图片",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){document.write(res.data.data)})).catch((function(){a.$axios.post("/api/pay/provide/pay/buyRank",e).then((function(t){document.write(t.data.data)}))})):0==this.pharmacy.pharmacyNum&&this.$confirm("你本周没有购买排名资格了，请等待下周在购买","购买店铺排名",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){})).catch((function(){}))},tableRowClassName:function(t){var a=t.row;t.rowIndex;return a.pharmacyId===this.pharmacy.pharmacyId?"success-row":""},seeOwn:function(){var t=this,a={content:this.pharmacy.pharmacyId,pageNum:this.currentPage,pageSize:this.pageSize,pharmacyStatus:1};console.log(a),this.$axios.post("/api/message/provide/pharmacy/getOwn",a).then((function(a){t.list=a.data.data.records,t.currentPage=a.data.data.current,t.totalNum=a.data.data.total,console.log(a.data),t.$message.success(a.data.message)}))},getPharmacyRank:function(){var t=this,a={content:this.content,pageNum:this.currentPage,pageSize:this.pageSize,pharmacyStatus:1};console.log(a),this.$axios.post("/api/message/provide/pharmacy/getAllPharmacy",a).then((function(a){t.list=a.data.data.records,t.currentPage=a.data.data.current,t.totalNum=a.data.data.total,console.log(a.data),t.$message.success(a.data.message)}))},handleSizeChange:function(t){this.currentPage=t,this.getPharmacyRank()},handleCurrentChange:function(t){this.currentPage=t,this.getPharmacyRank()},handleEdit:function(t,a){this.$router.push("/merMessage")}}},i=r,o=(e("bb34"),e("44e1"),e("2877")),s=Object(o["a"])(i,n,c,!1,null,"c0e65b46",null);a["default"]=s.exports},"6d34":function(t,a,e){},bb34:function(t,a,e){"use strict";e("febb")},febb:function(t,a,e){}}]);
//# sourceMappingURL=chunk-a10e6d32.70dcf509.js.map